title Friend

actor User1
participant Frontend1
participant Backend
database Database
participant Frontend2
actor User2

User1->Frontend1:redirect to others' profile page
activate User1
activate Frontend1
Frontend1->Backend:request profile page template
activate Backend
Frontend1<--Backend:return profile page template
deactivate Backend
User1<--Frontend1:display profile page template

alt not friends
User1->Frontend1:request add friend
Frontend1->Backend:request add friend
activate Backend
Backend->Database:check friend list & request list
activate Database
alt friend request exists
Backend<--Database:already requested
else no duplicate friend request
Backend<--Database:friend request created
deactivate Database
Backend->Database:create friend notification
Backend<--Database:friend notification created
end
Frontend1<--Backend:friend request sent
deactivate Backend
User1<-Frontend1:friend request sent

else already friends
User1->Frontend1:request delete friend
Frontend1->Backend:request delete friend
activate Backend
Backend->Database:remove friendship
activate Database
Backend<--Database:friend deleted
deactivate Database
Frontend1<--Backend:friend deleted
deactivate Backend
User1<-Frontend1:friend deleted
end
deactivate Frontend1
deactivate User1


User2 ->Frontend2: redirect to friend requests page
activate User2
activate Frontend2
Frontend2->Backend:request friend requests template
activate Backend
Frontend2<--Backend:return friend requests template
deactivate Backend
User2<--Frontend2:display friend requests template

alt accept friend request
User2->Frontend2:accept friend request
Frontend2->Backend: accept friend request
activate Backend
Backend->Database:remove friend request
activate Database
Backend<--Database:friend request removed
deactivate Database
Backend->Database:create friendship
activate Database
Backend<--Database:friendship created
deactivate Database
Frontend2<--Backend:friend added
deactivate Backend
User2<--Frontend2: friend request accepted

else reject friend request
User2->Frontend2:reject friend request
Frontend2->Backend: reject friend request
activate Backend
Backend->Database:remove friend request
activate Database
Backend<--Database: friend request removed
deactivate Database
Frontend2<--Backend:friend request rejected
deactivate Backend
User2<--Frontend2: friend request rejected
end
deactivate Frontend2
deactivate User2
